dist: trusty
sudo: required
language: cpp

os:
  - linux

compiler:
  - gcc
  # TODO: - clang

env:
  - TARGET_CPU=amd64 BUILD_CONFIGURATION=Release CI_NAME=TRAVIS
  # TODO: - TARGET_CPU=x86 BUILD_CONFIGURATION=Release

install:
  # build environment setup script
  - source ci/travis/install-env-$TRAVIS_OS_NAME.sh

script:
  # project build script
  - mkdir build && cd build
  - conan install --build=missing ../conanfile.txt
  - cmake .. -DCMAKE_BUILD_TYPE=$BUILD_CONFIGURATION -DTARGET_CPU=$TARGET_CPU
  - cmake --build .
  # ctest --output-on-failure
  - ls .
  - ls ..
  - ls bin
  - bin/json_spirit_unit_tests
